---
import { sendEmail } from '../server-actions/contactForm';

// Define the form action
const handleSubmit = sendEmail;

let submitted = false;

// Handle the form submission
if (Astro.request.method === 'POST') {
  const data = await handleSubmit(Astro.request);
  if (data.success) {
    submitted = true;
  }
}
---

<!-- Form for submitting the email -->
<form method="POST" action={Astro.url}>
  <label for="name">Name:</label>
  <input type="text" id="name" name="name" required />

  <label for="email">Email:</label>
  <input type="email" id="email" name="email" required />

  <label for="message">Message:</label>
  <textarea id="message" name="message" required></textarea>

  <button type="submit">Send</button>

  {submitted && <p>Thank you! Your message has been sent.</p>}
</form>